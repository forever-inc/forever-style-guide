$nav-icon-margin: 3px;
$cart-count-xsmall-offset: 2px;
$cart-count-mobile-offset: 6px;
$cart-count-width: 20px;
$cart-icon-xsmall-width: 30px + 10px; //10px to account for extra spacing
$icon-width: 28px;
$cart-tab-padding: 20px;
$cart-icon-vertical-offset: 7px;
$cart-icon-vertical-offset-mobile: 4px;
$deals-icon-horizontal-offset: 3px;
$deals-icon-horizontal-offset-mobile: 4px;
$chevron-bottom-alignment-offset: 15px;
$chevron-right-alignment-offset: 5px;
$screen-below-xs: $screen-xs - 1;

@mixin chevron-style {
  right: 15px;
  font-size: $font-size-default;
}

.nav-icon-stack {
  padding: 3px 4px 4px 4px !important; // overriding .navbar-nav > li > a
  text-align: center;

  .fa {
    display: block;
    position: relative;
    top: $nav-icon-margin;
  }

  .icon-bar {
    display: block;
    width: $icon-width;
    height: 4px;
    border-radius: 4px;
    margin: 3px auto 0 auto;

    &:first-of-type {
      margin-top: 1px;
    }

    &:last-of-type {
      margin-bottom: 3px;
    }
  }
}
.nav-icon-label {
  font-size: $font-size-xsmall;
  line-height: $font-size-xsmall;
  font-family: $font-face-gotham;
}

.navbar-default .navbar-nav {
  .dropdown-toggle .fa-chevron-down {
    position: absolute;
    font-size: $font-size-xsmall;
    @include transition(transform 0.2s ease-in-out);

    @media(max-width: $grid-float-breakpoint-max) {
      @include chevron-style;
    }

    @media(min-width: $grid-float-breakpoint) {
      right: $chevron-right-alignment-offset;
      bottom: $chevron-bottom-alignment-offset;
    }
  }
  .dropdown.open .dropdown-toggle .fa-chevron-down {
    @include transform(rotate(180deg));
  }
}

a.cart-icon {
  padding-top: $cart-icon-vertical-offset-mobile;

  @media(min-width: $grid-float-breakpoint) {
    padding-top: $cart-icon-vertical-offset !important; //override .nav.navbar-nav > li > a
  }
}

// Mobile Toggles
.navbar-default .navbar-toggle,
a.cart-icon {
  height: $header-height;
  width: $icon-width + $cart-tab-padding;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0;
  color: color('gray-600');
  font-size: $font-size-default;
  text-align: center;
  border: 0;
  border-radius: 0;
  z-index: $zindex-navbar-fixed; // make sure toggles appear above logo

  &:hover,
  &:active,
  &:focus {
    text-decoration: none;
    background-color: transparent;
  }
  &.navbar-toggle-close {
    width: 100%;
    padding: 0;
    @include nav-border(bottom);

    &:hover {
      background-color: color('white');
      cursor: pointer;
    }
    .nav-icon-stack {
      height: $header-height;
    }
  }
  &.with-count {
    width: $cart-count-width + $icon-width + $cart-tab-padding;

    @media (max-width: $screen-below-xs) {
      width: $cart-count-width + $cart-icon-xsmall-width;
    }
  }
}
a.cart-icon {
  @media (max-width: $grid-float-breakpoint-max) {
    position: absolute;
    right: 0;
  }
}
.cart-icon-count {
  display: inline-block;
  float: right;
  height: $cart-count-width;
  min-width: $cart-count-width;
  padding-top: 1px; // vertical align number in circle
  font-size: $font-size-200;
  border-radius: 50%;

  @media (max-width: $screen-below-xs) {
    margin-right: $cart-count-xsmall-offset;
  }

  @media (min-width: $screen-xs) and (max-width: $grid-float-breakpoint-max) {
    margin-right: $cart-count-mobile-offset;
  }
}

.deals-icon {
  @media (max-width: $grid-float-breakpoint-max) {
    margin-right: $deals-icon-horizontal-offset-mobile;
    float: left;
  }

  @media (min-width: $grid-float-breakpoint) {
    vertical-align: top;
    margin-left: $deals-icon-horizontal-offset;
  }
}
